<script>
    // ... существующий код ...

    // Новый обработчик для экрана
    socket.on('screen-offer', async (offer) => {
        createPeerConnection();

        try {
            await peerConnection.setRemoteDescription(new RTCSessionDescription(offer));
            const answer = await peerConnection.createAnswer();
            await peerConnection.setLocalDescription(answer);
            
            socket.emit('viewer-screen-answer', answer);
            statusEl.textContent = 'Screen sharing - Sending answer...';
        } catch (error) {
            statusEl.textContent = 'Screen sharing - Error processing offer';
            console.error(error);
        }
    });
</script>
